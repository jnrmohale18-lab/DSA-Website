<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Spectrum Access</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, #2a5298, #1e3c72);
      color: white;
      margin: 0;
      padding: 0;
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      position: relative;
    }

    .logo {
      position: absolute;
      left: 20px;
      background-color: #00bcd4;
      color: white;
      font-weight: bold;
      font-size: 18px;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    h1.title {
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-size: 26px;
      text-align: center;
    }

    .page {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      padding: 40px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }

    input, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
      font-size: 15px;
    }

    button {
      background-color: #00bcd4;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #0097a7;
    }

    .hidden {
      display: none;
    }

    .tabs {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .tab {
      background-color: #00bcd4;
      border-radius: 5px;
      padding: 10px 20px;
      cursor: pointer;
      margin: 5px;
      transition: background 0.3s ease;
    }

    .tab:hover {
      background-color: #0097a7;
    }

    .tab-content {
      display: none;
      padding: 10px;
      text-align: left;
    }

    .tab-content.active {
      display: block;
    }

    .logout-btn {
      margin-top: 30px;
      background-color: #e53935;
    }

    @media (max-width: 600px) {
      .container {
        width: 95%;
        padding: 25px;
      }
    }
/* ... (Existing styles remain the same) ... */

frequency-chart-container {
  position: relative;
  margin-bottom: 30px;
}
/* New styles for the frequency chart */
.frequency-chart {
  display: flex;
  height: 50px;
  width: 100%;
  margin: 20px 0;
  border: 1px solid #00bcd4;
  border-radius: 5px;
  overflow: hidden;
}

.frequency-segment {
  height: 100%;
  text-align: center;
  line-height: 50px;
  color: #fff;
  font-size: 12px;
  font-weight: bold;
  cursor: default;
  transition: background 0.3s ease;
  flex-shrink: 0;
}

.frequency-axis {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: #ccc;
  margin-top: 5px;
}
.frequency-axis span:first-child {
  position: absolute;
  left: 0;
  top: 65px;
}

.frequency-axis span:last-child {
  position: absolute;
  right: 0;
  top: 65px;
}
.occupied {
  background-color: #e53935; /* Red */
}

.unoccupied {
  background-color: #43a047; /* Green */
  cursor: pointer;
}

.unoccupied:hover {
  background-color: #2e7d32;
}

.frequency-selection-btn {
  margin-top: 10px;
  background-color: #00bcd4;
}

.frequency-selection-btn:hover {
  background-color: #0097a7;
}
.confirm-btn {
  background-color: #43a047; /* Green for confirmation */
}

.confirm-btn:hover {
  background-color: #2e7d32;
}

/* Style for the back/cancel button */
.cancel-btn {
  background-color: #ffb300; /* Amber/Orange for cancel */
}

.cancel-btn:hover {
  background-color: #fb8c00;
}
  </style>
</head>
<body>
  <header>
    <div class="logo">DSA</div>
    <h1 class="title">DYNAMIC SPECTRUM ACCESS</h1>
  </header>

  <!-- WELCOME PAGE -->
  <div class="page" id="welcome-page">
    <div class="container">
      <h2>Welcome</h2>
      <input type="text" id="username" placeholder="Username" />
      <input type="password" id="password" placeholder="Password" />
      <button onclick="login()">Log In</button>
      <button onclick="showRegister()">Register</button>
      <p id="login-message"></p>
    </div>
  </div>

  <!-- REGISTRATION PAGE -->
  <div class="page hidden" id="register-page">
    <div class="container">
      <h2>Register</h2>
      <input type="text" id="reg-username" placeholder="Choose Username" />
      <input type="password" id="reg-password" placeholder="Choose Password" />
      <input type="password" id="otp" placeholder="Enter OTP" />
      <button onclick="register()">Submit</button>
      <button onclick="backToLogin()">Back</button>
      <p id="register-message"></p>
    </div>
  </div>

  <!-- DASHBOARD PAGE -->
  <div class="page hidden" id="dashboard">
    <div class="container">
      <h2 id="welcome-msg"></h2>

      <div class="tabs" id="tabs">
        <div class="tab" onclick="showTab('home')">Home</div>
        <div class="tab" onclick="showTab('stakeholder')">Stakeholder</div>

        <div class="tab" onclick="showTab('dynamic-access')">Dynamic Access</div>
        <div class="tab hidden" id="admin-tab" onclick="showTab('admin')">Admin Access</div>
      </div>

      <div id="home" class="tab-content active">
  <h2>Home</h2>
  <p>Welcome to the Dynamic Spectrum Access website. This website forms part of the final year project that was done by <strong>Mr Tshepo Mabote</strong>.</p>
  
  <p>Mr Mabote is a final year student in the Faculty of Engineering and the Built Environment at the School of Electrical & Electronic Engineering Science at the University of Johannesburg.</p>
  
  <p>The Dynamic Spectrum Access project is a collaboration between the University of Johannesburg and the CSIR.</p>
  
  <p>The initial project was for Dynamic Spectrum Access within the C band, but due to various constraints, the frequency band of 433MHz to 450MHz was chosen to illustrate how the proposed framework functions.</p>
</div>

<div id="stakeholder" class="tab-content">
  <h3>Stakeholders</h3>
  <p>Here we would like to introduce you to the Stakeholders of this project:</p>

  <p><strong>Project Manager: Mr Tshepo Mabote</strong><br>
  Mr Mabote is a final year student at the University of Johannesburg. He brings his fundamental understanding of Telecommunications, Power Electronics, and Electromagnetism. His understanding of spectrum distribution and access is showcased in his final year project.</p>

  <p><strong>Project Supervisor: Mr Lucas Tivani</strong><br>
  Mr Tivani is the project supervisor chosen by Mr Mabote. He brings to the project his multiple years of experience in Telecommunications. Mr Tivani is a proud holder of a BEng in Electrical & Electronics Engineering, a BSc in Information Technology, and a MEng in Electrical & Electronics Engineering from the University of Johannesburg.</p>

  <p><strong>External Project Supervisor: Mr Ntsako Mabunda</strong><br>
  Mr Mabunda is the External Supervisor of the project and the representative of the CSIR on the project. Mr Mabunda brings multiple years of experience in Telecommunications. Mr Mabunda is a proud holder of a BEng in Electrical & Electronics Engineering from the University of Johannesburg, a Postgraduate Diploma in Business Administration from the University of the Witwatersrand, and a MEng in Electrical & Electronics Engineering from the University of Cape Town.</p>
</div>


     <div id="dynamic-access" class="tab-content">
  <h3>Dynamic Spectrum Access</h3>
  <p><strong>Frequency Band: 433MHz to 450MHz</strong></p>

  <h4>Current Spectrum Occupancy</h4>
  <p style="font-size: 12px; margin-bottom: 5px;">Occupied (Red) | Unoccupied (Green)</p>

  <div class="frequency-chart-container">
    <div class="frequency-chart" id="frequency-chart">
    </div>
    <div class="frequency-axis">
      <span id="start-freq"></span>
      <span id="end-freq"></span>
    </div>
  </div>


        <div id="frequency-selection-section">
      <h4>Available Frequency Ranges (Unoccupied)</h4>
      <p>Click on an option below to select an available frequency range:</p>
      <div id="unoccupied-options">
      </div>
    </div>

        <div id="pricing-model" class="hidden">
      <h4>Frequency Booking Confirmation</h4>
      <p id="pricing-details"></p>
      <button id="confirm-order-btn" class="confirm-btn">Confirm Order</button>
      <button onclick="showFrequencySelection()" class="cancel-btn">Cancel Selection</button>
    </div>
    
    <p id="selected-frequency-message" style="margin-top: 15px; font-weight: bold; color: #00bcd4;"></p>
</div>


     <div id="admin" class="tab-content">
  <h3>Admin Access</h3>
  <p>Manage registered users below:</p>
  <div id="user-list"></div>
</div>


      <button class="logout-btn" onclick="logout()">Log Out</button>
    </div>
  </div>

  <script>
    const users = [
  { username: "user1", password: "1234", role: "user", active: true },
  { username: "user2", password: "5678", role: "user", active: true },
  { username: "admin", password: "admin", role: "admin", active: true }
];

// Frequency data for 433MHz to 450MHz (17MHz total range)
  // Each segment represents 1MHz for simplicity.
  const frequencyData = [
    { range: "433-434 MHz", occupied: true, width: "5.88%" }, // Approx 1/17th of the band
    { range: "434-436 MHz", occupied: false, width: "11.76%" }, // 2MHz
    { range: "436-438 MHz", occupied: true, width: "11.76%" }, // 2MHz
    { range: "438-439 MHz", occupied: false, width: "5.88%" }, // 1MHz
    { range: "439-441 MHz", occupied: true, width: "11.76%" }, // 2MHz
    { range: "441-443 MHz", occupied: false, width: "11.76%" }, // 2MHz
    { range: "443-444 MHz", occupied: true, width: "5.88%" }, // 1MHz
    { range: "444-445 MHz", occupied: false, width: "5.88%" }, // 1MHz
    { range: "445-446 MHz", occupied: true, width: "5.88%" }, // 1MHz
    { range: "446-447 MHz", occupied: false, width: "5.88%" }, // 1MHz
    { range: "447-448 MHz", occupied: true, width: "5.88%" }, // 1MHz
    { range: "448-450 MHz", occupied: false, width: "11.76%" } // 2MHz (Total 17 MHz, rounded percentages)
  ];
    function showRegister() {
      document.getElementById("welcome-page").classList.add("hidden");
      document.getElementById("register-page").classList.remove("hidden");
    }

    function backToLogin() {
      document.getElementById("register-page").classList.add("hidden");
      document.getElementById("welcome-page").classList.remove("hidden");
    }

    function register() {
      const username = document.getElementById("reg-username").value.trim();
      const password = document.getElementById("reg-password").value.trim();
      const otp = document.getElementById("otp").value.trim();
      const message = document.getElementById("register-message");

      if (otp !== "2160") {
        message.textContent = "Invalid OTP.";
        return;
      }
      if (!username || !password) {
        message.textContent = "Please fill all fields!";
        return;
      }

      users.push({ username, password, role: "user" });
      message.textContent = "Registration successful! You can now log in.";
      setTimeout(backToLogin, 1500);
    }

  function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const message = document.getElementById("login-message");

  const user = users.find(u => u.username === username && u.password === password);

  if (!user) {
    message.textContent = "Invalid username or password.";
    return;
  }

  if (!user.active) {
    message.textContent = "Your account has been deactivated by the admin.";
    return;
  }

  // Proceed with login
  document.getElementById("welcome-page").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
  document.getElementById("welcome-msg").textContent = `Welcome, ${user.username}!`;

  if (user.role === "admin") {
    document.getElementById("admin-tab").classList.remove("hidden");
    renderUserList();
  } else {
    document.getElementById("admin-tab").classList.add("hidden");
  }
// Initialize dynamic access tab content
    if (user) {
      renderFrequencyChart();
      renderUnoccupiedOptions();
    }
}



    function logout() {
      document.getElementById("dashboard").classList.add("hidden");
      document.getElementById("welcome-page").classList.remove("hidden");
      document.getElementById("login-message").textContent = "";
      document.getElementById("username").value = "";
      document.getElementById("password").value = "";
    }

    function showTab(tabId) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
    }
function renderUserList() {
  const list = document.getElementById("user-list");
  list.innerHTML = "";

  users.forEach((user, index) => {
    if (user.role !== "admin") {
      const userDiv = document.createElement("div");
      userDiv.style.marginBottom = "10px";
      userDiv.innerHTML = `
        <strong>${user.username}</strong> - Status: ${user.active ? "Active" : "Inactive"}
        <button onclick="toggleUser(${index})">${user.active ? "Deactivate" : "Activate"}</button>
      `;
      list.appendChild(userDiv);
    }
  });
}

function toggleUser(index) {
  users[index].active = !users[index].active;
  renderUserList();
}
// --- New Functions for Dynamic Access Tab ---

function renderFrequencyChart() {
    const chart = document.getElementById("frequency-chart");
    chart.innerHTML = ""; // Clear existing content

    // Set axis labels
    document.getElementById("start-freq").textContent = `${frequencyData[0].start} MHz`;
    document.getElementById("end-freq").textContent = `${frequencyData[frequencyData.length - 1].end} MHz`;

    frequencyData.forEach(segment => {
      const div = document.createElement("div");
      div.className = "frequency-segment " + (segment.occupied ? "occupied" : "unoccupied");
      div.style.width = segment.width;
      div.title = segment.range + (segment.occupied ? " (Occupied)" : " (Unoccupied)");
      div.textContent = segment.range.split('-')[0].trim().replace(" MHz", "") + '+'; // Show start frequency
// Display the start frequency of the segment
      div.textContent = `${segment.start}`;
 
      if (!segment.occupied) {
        div.onclick = () => selectFrequency(segment.range);
      }
      chart.appendChild(div);
    });
  }

  function renderUnoccupiedOptions() {
    const optionsDiv = document.getElementById("unoccupied-options");
    optionsDiv.innerHTML = "";
    
    // Get only unoccupied ranges
    const unoccupiedRanges = frequencyData
      .filter(segment => !segment.occupied)
      .map(segment => segment.range);

    // Limit to 5 options, or fewer if less are available
    const optionsToShow = unoccupiedRanges.slice(0, 5);

    optionsToShow.forEach(range => {
      const button = document.createElement("button");
      button.className = "frequency-selection-btn";
      button.textContent = `Book: ${range}`;
      button.onclick = () => selectFrequency(range);
      optionsDiv.appendChild(button);
    });
    
    if (optionsToShow.length === 0) {
        optionsDiv.innerHTML = "<p>No unoccupied frequencies are currently available.</p>";
    }
  }
  
 function selectFrequency(range) {
    // Hide selection options and show pricing model
    document.getElementById("frequency-selection-section").classList.add("hidden");
    document.getElementById("pricing-model").classList.remove("hidden");
    
    // Find the bandwidth for the selected range (for simple pricing)
    const segment = frequencyData.find(s => s.range === range);
    const bandwidth = segment ? segment.bandwidth : 0; // in MHz

    // Simple placeholder pricing: R150 per MHz
    const pricePerMHz = 150;
    const totalPrice = bandwidth * pricePerMHz;
    
    const pricingDetails = document.getElementById("pricing-details");
    pricingDetails.innerHTML = `
      <p>You have selected the frequency range: <strong>${range}</strong></p>
      <p>Bandwidth: <strong>${bandwidth} MHz</strong></p>
      <p>Price per MHz (Placeholder): R${pricePerMHz}</p>
      <h3>Total Estimated Price: R${totalPrice}</h3>
      <p><em>Note: This price is for illustrative purposes only.</em></p>
    `;

    // Update the Confirm Order button to call the confirmation function with the selected range
    const confirmBtn = document.getElementById("confirm-order-btn");
    confirmBtn.onclick = () => confirmOrder(range);

    // Clear the previous message
    document.getElementById("selected-frequency-message").textContent = "";
  }

  function showFrequencySelection() {
    // Show selection options and hide pricing model
    document.getElementById("frequency-selection-section").classList.remove("hidden");
    document.getElementById("pricing-model").classList.add("hidden");
    document.getElementById("selected-frequency-message").textContent = "";
  }
  
  function confirmOrder(range) {
    // Placeholder for actual booking logic (API call, database update, etc.)
    document.getElementById("pricing-model").classList.add("hidden");
    document.getElementById("frequency-selection-section").classList.remove("hidden");

    const message = document.getElementById("selected-frequency-message");
    message.style.color = "#43a047"; // Green color for success
    message.textContent = `SUCCESS! Your booking for ${range} has been confirmed (placeholder).`;

    // In a real app, you would also update the frequencyData and re-render the chart/options
  }

  </script>
</body>
</html>
